---
layout: default
locale: zh-Hans
title: 导出 & 导入
nav_order: 5
parent: 中文 (简体)
permalink: /zh_Hans/export_and_import
---

# 导出 & 导入
{: .no_toc }

## 目录
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## 导出交易

ezbookkeeping 支持使用命令行或从用户界面中导出交易数据为 CSV（Comma-separated values）或 TSV（Tab-separated values）格式的文件。

### 通过命令行导出交易

详见 [transaction-export](/zh_Hans/command_line#userdata)

### 从桌面版用户界面导出交易

1. 在 “用户设置” 页面中点击 “数据管理”
2. 点击 “导出数据” 按钮，选择文件类型即可导出所有交易到指定类型的文件中

### 从移动版用户界面导出交易

1. 在 “设置” 页面中轻触 “数据管理”
2. 轻触 “导出数据” 按钮，选择文件类型即可导出所有交易到指定类型的文件中

## 导入交易

ezbookkeeping 支持使用命令行导入 ezbookkeeping 导出的文件，或从桌面版用户界面中导入多种类型的交易数据文件，同时桌面版提供的交易数据导入工具支持预览导入的数据以及批量对导入的数据进行修改。

### 通过命令行导入交易

详见 [transaction-import](/zh_Hans/command_line#userdata)

### 从桌面版用户界面导入交易

1. 在 “交易详情” 页面中点击 “导入” 按钮
2. 选择要导入文件的类型和文件，然后点击 “下一步” 按钮
3. 检查导入的交易是否映射到已经创建的分类、账户和标签，无效的数据将会标红显示。您可以点击每条记录左侧的笔形状的图标修改这条交易的分类、账户或标签。您还可以点击右上角的菜单，批量替换分类、账户或标签。最后点击交易左侧的复选框，选择最终要导入的交易，然后点击 “导入” 按钮即可

下表列出了所有支持导入的文件类型以及支持导入的数据内容：

| 文件类型 | 收入交易 | 支出交易 | 转账交易 | 不同货币的转账交易 | 拆分交易 | 分类名 | 账户名 | 标签名 | 时区 | 地理位置 | 描述 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ezbookkeeping 数据导出文件 | √ | √ | √ | √ | - | √ | √ | √ | √ | √ | √ |
| 分隔符分隔值 (DSV) 文件、数据 | √ | √ | √ | √ | - | √ | √ | √ | √ | √ | √ |
| 开放式金融交换 (OFX) 文件 | √ | √ | √ | - | - | - | - | - | √ | - | √ |
| Quicken Financial Exchange (QFX) 文件 | √ | √ | √ | - | - | - | - | - | √ | - | √ |
| Quicken Interchange Format (QIF) 文件 | √ | √ | √ | - | × | √ | √ | - | - | - | √ |
| Intuit Interchange Format (IIF) 文件 | √ | √ | √ | - | √ (*1) | √ | √ | - | - | - | √ |
| Camt.053 银行对账单文件 | √ | √ | - | - | - | - | √ | - | √ | - | √ |
| MT940 客户对账消息文件 | √ | √ | - | - | - | - | √ | - | - | - | √ |
| GnuCash XML 数据库文件 | √ | √ | √ | √ | × | √ | √ | - | √ | - | √ |
| Firefly III 数据导出文件 | √ | √ | √ | √ | - | √ | √ | √ | √ | - | √ |
| Beancount 数据文件 | √ | √ | √ | √ | × | √ | √ | √ | - | - | √ |
| 随手记 (App) 数据导出文件 | √ | √ | √ | √ | - | √ | √ | - | - | - | √ |
| 随手记 (Web版) 数据导出文件 | √ | √ | √ | - | - | √ | √ | - | - | - | √ |
| 随手记 (神象云账本) 数据导出文件 | √ | √ | √ | - | - | √ | √ | - | - | - | √ |
| 支付宝 (App) 交易流水文件 | √ | √ | √ | - | - | √ | √ | - | - | - | √ |
| 支付宝 (网页版) 交易流水文件 | √ | √ | √ | - | - | - | √ | - | - | - | √ |
| 微信支付账单文件 | √ | √ | √ | - | - | √ | √ | - | - | - | √ |
| 京东金融账单文件 | √ | √ | √ | - | - | √ | √ | - | - | - | √ |

* “√” 表示原始文件包含该数据，同时该数据可以被导入
* “-” 表示原始文件不包含该数据
* “×” 表示原始文件包含该数据，但该数据不支持被导入
* \*1: 拆分交易将转换为独立的交易

### 如何导入分隔符分隔值 (DSV) 文件、数据

ezBookkeeping 支持导入使用分隔符分隔的自定义格式数据，您可以将您要导入的数据使用逗号或制表符分隔，然后将其保存为 CSV 或 TSV 格式的文件，或者直接将其粘贴到文本框中。

1. 在 “交易详情” 页面中点击 “导入” 按钮
2. 选择 “分隔符分隔值 (DSV) 文件” 或 “分隔符分隔值 (DSV) 数据” 作为文件类型
   1. 对于 “分隔符分隔值 (DSV) 文件”，需要选择文件编码并选择导入的文件
   2. 对于 “分隔符分隔值 (DSV) 数据”，直接在下方文本框粘贴文件的内容
   3. 然后选择格式为 “CSV (逗号分隔的值) 文件” 或 “TSV (制表符分隔的值) 文件”
   4. 然后根据需要选择处理方法为 “列映射” 或 “自定义脚本”，点击 “下一步” 按钮

如果处理方法选择为 “列映射”，ezBookkeeping 会将上述数据显示为表格形式。您可以点击每列的标题设置对应的映射。ezBookkeeping 导入交易需要至少包含 “交易时间”、“交易类型” 和 “金额” 三列数据
1. 设置完 “交易类型” 列后，需要点击下方 “交易类型映射” 设置每一种交易类型对应的 ezBookkeeping 的交易类型
2. 设置完 “交易时间” 列后，ezBookkeeping 会自动检测交易时间的格式，如果提示 “未知”，需要点击 “时间格式” 并手动选择对应的格式或修改文件中的交易时间数据
3. 设置完 “金额” 列后，ezBookkeeping 会自动检测金额的格式，如果提示 “未知”，需要点击 “金额格式” 并手动选择对应的格式
4. 如果设置 “交易时区”、“地理位置” 和 “标签” 列后，也需要设置交易时区的格式以及地理位置和交易标签的分隔符
5. 所有列设置完成后，点击 “下一步” 按钮

如果处理方法选择为 “自定义脚本”，在接下来的页面中允许用户通过编写 JavaScript 代码处理要导入的数据，你可以编写 `parse` 函数，ezBookkeeping 会将每一行分隔好的数据及索引传入该函数，你可以按页面中的示例返回一个对象或返回 `null` 跳过该数据。完成后点击 “执行自定义脚本”，并点击 “下一步”

最后你需要检查导入的交易是否映射到已经创建的分类、账户和标签，无效的数据将会标红显示。您可以点击每条记录左侧的笔形状的图标修改这条交易的分类、账户或标签。您还可以点击右上角的菜单，批量替换分类、账户或标签。最后点击交易左侧的复选框，选择最终要导入的交易，然后点击 “导入” 按钮即可

### 如何获取 GnuCash XML 数据库文件

[![](images/how_to_export_gnucash.png)](images/how_to_export_gnucash.png)

1. 点击 “文件” 菜单，选择 “另存为”
2. 选择 “数据格式” 中的 “xml”，保存即可导出 XML 格式的 GnuCash 数据库

### 如何获取 Firefly III 数据导出文件

[![](images/how_to_export_firefly_iii.png)](images/how_to_export_firefly_iii.png)

1. 在 Firefly III 左侧导航栏中点击 “导出数据”
2. 点击 “导出所有交易” 即可导出为 csv 格式的文件

### 如何获取随手记（App）数据导出文件

[![](images/how_to_export_feidee_mymoney_app.png)](images/how_to_export_feidee_mymoney_app.png)

1. 在随手记App选择账本后点击 “设置”，然后点击 “高级功能”
2. 在新的页面中点击 “备份与同步”
3. 在新的页面中点击 “备份与恢复”
4. 在新的页面中点击 “本地备份与恢复”
5. 在新的页面中点击 “导出Excel文件(CSV)” 即可导出为 csv 格式的文件

> 注意：随手记 iPhone App 导出的交易数据中没有正确处理交易备注中的换行符，如果交易备注中包含换行符，导入 ezbookkeeping 将会失败。如果存在该问题，可以使用随手记 Android App 导出交易数据，然后再导入到 ezbookkeeping。

### 如何获取随手记（Web版）数据导出文件

[![](images/how_to_export_feidee_mymoney_web.png)](images/how_to_export_feidee_mymoney_web.png)

1. 在随手记网页版点击 “新功能” 菜单
2. 在弹出的菜单中点击 “导入导出”
3. 点击 “数据导出” 下方数据来源的 “随手记 web版”，即可导出为 Excel（.xls）格式的文件

> 注意：随手记（Web版）导出的转账交易数据中没有正确处理跨币种的转账交易数据，跨币种的转账交易只有一个金额。如果您要导入的数据中包含跨币种的转账交易，请使用随手记手机App导出交易数据，然后再导入到 ezbookkeeping。

### 如何获取随手记（神象云账本）数据导出文件

**从随手记（App）导出神象云账本**

[![](images/how_to_export_feidee_mymoney_elecloud_app.png)](images/how_to_export_feidee_mymoney_elecloud_app.png)

1. 在随手记App选择账本后点击 “设置”，然后点击 “数据导出”
2. 设置导出数据的时间范围等
3. 点击 “导出” 即可导出为 Excel（.xlsx）格式的文件

**从随手记（Web版）导出神象云账本**

[![](images/how_to_export_feidee_mymoney_elecloud_web_1.png)](images/how_to_export_feidee_mymoney_elecloud_web_1.png)

[![](images/how_to_export_feidee_mymoney_elecloud_web_2.png)](images/how_to_export_feidee_mymoney_elecloud_web_2.png)

1. 在随手记网页版的神象云账本菜单中点击 “设置”
2. 在设置页面中点击 “数据导出”
3. 设置导出数据的时间范围等
4. 点击 “确认导出” 即可导出为 Excel（.xlsx）格式的文件

### 如何获取支付宝（App）交易流水文件

[![](images/how_to_export_alipay_app.png)](images/how_to_export_alipay_app.png)

1. 在支付宝App选择 “我的”，然后点击 “账单”
2. 在新的页面中点击右上角打开菜单，然后选择 “开具交易流水证明”
3. 在新的页面中选择 “用于个人对账”，然后点击 “申请”
4. 在新的页面中设置导出的交易时间范围，然后点击 “下一步”
5. 在新的页面中输入要接收导出数据的电子邮箱地址，然后点击 “发送”
6. 若上一步提交成功，会在新的页面提示申请已提交，然后点击 “完成”
7. 打开第5步填写的邮箱，下载由支付宝发送的导出数据 zip 压缩文件。然后返回支付宝App首页，选择 “消息”，在 “服务消息” 中可以查看该压缩文件的密码，使用该密码解压缩后即为导出的 csv 格式文件

### 如何获取支付宝（网页版）交易流水文件

[![](images/how_to_export_alipay_web_1.png)](images/how_to_export_alipay_web_1.png)

[![](images/how_to_export_alipay_web_2.png)](images/how_to_export_alipay_web_2.png)

1. 登录网页版支付宝后，点击 “查看所有交易记录”
2. 选择要导出的时间范围
3. 点击 “下载查询结果” 即可导出 zip 格式的压缩文件，解压缩后即为 csv 格式的文件

### 如何获取微信支付账单文件

[![](images/how_to_export_wechat_pay_app.png)](images/how_to_export_wechat_pay_app.png)

1. 在微信App选择 “我”，然后点击 “服务”
2. 在新的页面中点击“钱包”
3. 在新的页面中点击右上角的“账单”
4. 在新的页面中点击右上角的“常见问题”
5. 在新的页面中点击“下载账单”
6. 在新的页面中点击 “用于个人对账”
7. 在新的页面中设置导出的交易时间范围，然后点击 “下一步”
8. 在新的页面中输入要接收导出数据的电子邮箱地址，然后点击 “下一步”
9. 若上一步提交成功，会在新的页面提示申请已提交，然后点击 “完成”
10. 打开第8步填写的邮箱，下载由微信支付发送的导出数据 zip 压缩文件。然后返回微信App首页，找到 “微信支付” 发送的消息，即可查看该压缩文件的密码，使用该密码解压缩后即为导出的 xlsx 或 csv 格式文件

### 如何获取京东金融账单文件

[![](images/how_to_export_jdcom_finance_app.png)](images/how_to_export_jdcom_finance_app.png)

1. 在京东金融App选择 “我”，然后点击 “我的账单”
2. 在新的页面中点击右上角的三个点打开菜单
3. 在弹出的菜单中点击“账单导出 (仅限个人对账)”
4. 在新的页面中输入要接收导出数据的电子邮箱地址，然后点击 “确认并提交”
5. 若提交成功，会在新的页面提示接收文件的解压缩密码
6. 打开第4步填写的邮箱，下载由京东金融发送的导出数据 zip 压缩文件，并使用第5步提示的解压码即可导出 csv 格式文件
